---
slug: react-xarrows-v3
title: react-xarrows V3
authors: [eliav]
tags: [react-xarrows, react]
---

react-xarrows v3 takes different approach from v2. v3 is more flexible and customizable, but also slightly more complex and verbose(in terms of code length).

react-xarrows v2 implemented a huge single component(with some smaller utility components), and each feature was
controlled by a set of properties that were passed to this component. for example, the arrow head was controlled by the
`headSize`, `headColor`, and `showHead` properties.
this approach does not scale well as complexity grows.

react-xarrows v3 takes a different approach, and emphasizes component composition rather than passing props. meaning,
v3 would give you the tools to compose your own custom arrow using component composition, hooks, and utilities that abstract most of the complicated logic rather than trying to implement every possible use case in a single component and adjust it using props.

so, for example, in v2, to add a head to the arrow you would use the `showHead` prop, to change it's color you would use the `headColor` prop, and so on.
```js
<Xarrow
  start="a"
  end="b"
  showHead
  headColor="purple"
  headSize={10}
/>
```

import XarrowV2 from "react-xarrows-v2"
import { useRef, forwardRef } from "react"

export const Circle = forwardRef((props, fref) => {
  return (
    <div
      ref={fref}
      style={{
        width: 20,
        height: 20,
        borderRadius: "50%",
        border: "1px solid red",
      }}
    />
  )
})

export const ExampleV2 = () => {
  const aRef = useRef(null)
  const bRef = useRef(null)
  return (
    <div style={{ display: "flex", justifyContent: "space-around" }}>
      <Circle ref={aRef} />
      <Circle ref={bRef} />
      <XarrowV2
        start={aRef}
        end={bRef}
        showHead
        headColor="purple"
        headSize={10}
      />
    </div>
  )
}

<ExampleV2 />
<div style={{ height: 20 }} />


notice that single component is responsible to create the arrow body, the head, and the label, and it is also responsible to position them all correctly based on the selected anchoring(e.g`startAnchor='auto'`).


in v3, you would need to create an `Head` component, and pass it the color you want to use.
```js
<XArrow
  start="a"
  end="b"
>
  <Head color="red" size={10} />
</XArrow>
```

import { XArrow, useXContext, autoSelectAnchor, XHead, NormalizedGSvg,XLine } from "react-xarrows"

export const Head = ({ color, size }) => {
  const context = useXContext();
  let { startRect, endRect } = context;
  if (!startRect || !endRect) return null;
  const {
    startPoint: { x: x1, y: y1 },
    endPoint: { x: x2, y: y2 },
  } = autoSelectAnchor(startRect, endRect);
  return (
    <XHead pos={{ x: x2, y: y2 }} dir={{ x1: x2 - x1, y: y2 - y1 }} size={size}>
      <NormalizedGSvg>
        <path d={`M 0 0 L 1 0.5 L 0 1 L 0.25 0.5 z`} />
      </NormalizedGSvg>
    </XHead>
  )
}

export const ExampleV3 = () => {
  const aRef = useRef()
  const bRef = useRef()
  return (
    <div style={{ display: "flex", justifyContent: "space-around" }}>
      <Circle ref={aRef} />
      <Circle ref={bRef} />
      <XArrow
        start={aRef}
        end={bRef}
      >
        <XLine {...{ x1, y1, x2, y2 }}/>
        <Head color="red" size={100} />
      </XArrow>
    </div>
  )
}

<ExampleV3 />
<div style={{ height: 20 }} />